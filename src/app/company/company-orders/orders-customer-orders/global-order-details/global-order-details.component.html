<app-authorised-layout>
  <div class="af-form-wrapper" *ngIf="form">

    <div class="af-form-row">
      <div class="af-form-block--c12 d-flex justify-content-between">
        <div class="title-page content-element--title">{{ title }} <span>{{ form.get('id').value }}</span></div>
        <app-last-seen-tag *ngIf="this.update"
                           [dateFormat]="form.get('lastChange').value"
                           [identifier]="userLastChanged">
        </app-last-seen-tag>
      </div>
    </div>

    <div class="af-form-row">
      <div class="af-form-block--c6">
        <div class="af-form-element">

          <div class="af-row">
            <div class="af-c12">
              <textinput
                      label="Order ID"
                      i18n-label="@@globalOrderEdit.textinput.orderID.label"
                      [form]="form.get('id')"
                      style="width: 100%"
                      placeholder="Enter id"
                      i18n-placeholder="@@globalOrderEdit.textinput.orderID.placeholder"
                      [isInvalid]="submitted && form.get('id').invalid">
                <ng-container *ngIf="submitted">
                  <div *ngIf="form.get('id').errors as errors" class="sc-invalid-feedback">
                    <div *ngIf="errors.required" i18n="@@globalOrderEdit.textinput.orderID.error.required">
                      Order ID is required
                    </div>
                  </div>
                </ng-container>
              </textinput>
            </div>
          </div>

          <div class="af-row">
            <div class="af-c12">
              <single-choice
                      label="Customer"
                      i18n-label="@@globalOrderEdit.textinput.customer.label"
                      [formControlInput]="form.get('customer')"
                      [codebookService]="companyCustomerCodebook"
                      style="min-width: 150px;"
                      [isInvalidChoice]="submitted && form.get('customer').invalid">
                <ng-container *ngIf="submitted">
                  <div *ngIf="form.get('customer').errors as errors" class="sc-invalid-feedback">
                    <div *ngIf="errors.required" i18n="@@globalOrderEdit.textinput.customer.error.required">
                      Customer is required
                    </div>
                  </div>
                </ng-container>
              </single-choice>
            </div>
          </div>

          <div class="af-row">
            <div class="af-c12">
              <single-choice
                      *ngIf="outputFacilitiesCodebook"
                      label="Order to"
                      i18n-label="@@stockOrderItem.outputFacilityForm.label"
                      [formControlInput]="outputFacilityForm"
                      [codebookService]="outputFacilitiesCodebook"
                      style="min-width: 150px;"
                      [isInvalidChoice]="submitted && outputFacilityForm.invalid">
                <ng-container *ngIf="submitted">
                  <div *ngIf="outputFacilityForm.errors as errors" class="sc-invalid-feedback" i18n="@@stockOrderItem.outputFacilityForm.error.required">
                    Output facility is required
                  </div>
                </ng-container>
              </single-choice>
            </div>
          </div>

          <div class="af-row">
            <div class="af-c12">
              <single-choice
                      label="Required grade"
                      i18n-label="@@globalOrderEdit.singleChoice.quality.label"
                      [formControlInput]="form.get('requiredGrade')"
                      [codebookService]="gradeAbbreviationCodebook"
                      style="min-width: 150px;"
                      [isInvalidChoice]="submitted && form.get('requiredGrade').invalid">
                <ng-container *ngIf="submitted">
                  <div *ngIf="form.get('requiredGrade').errors as errors" class="sc-invalid-feedback" i18n="@@globalOrderEdit.singleChoice.quality.error">
                    Required grade is required
                  </div>
                </ng-container>
              </single-choice>
            </div>
          </div>

          <div class="af-row">
            <div class="af-c12">
              <checkbox-input
                      [form]="form.get('requiredwomensOnly')"
                      style="margin-bottom: 1rem; margin-top: -1rem;">
                <checkbox-input-rich-label>
                  <span i18n="@@globalOrderEdit.checkbox.womensCoffee.label">Women's only</span>
                </checkbox-input-rich-label>
              </checkbox-input>
            </div>
          </div>

          <div class="af-row">
            <div class="af-c4">
              <app-datepicker
                      label="Latest date of delivery"
                      i18n-label="@@globalOrderEdit.datepicker.latestDateOfDelivery.label"
                      [form]="form.get('deliveryDeadline')"
                      [invalid]="submitted && form.get('deliveryDeadline').invalid">
                <ng-container *ngIf="submitted">
                  <div *ngIf="form.get('deliveryDeadline').errors as errors" class="sc-invalid-feedback">
                    <div *ngIf="errors.required" i18n="@@globalOrderEdit.datepicker.latestDateOfDelivery.error.required">
                      Latest delivery date is required
                    </div>
                  </div>
                </ng-container>
              </app-datepicker>
            </div>
          </div>

          <!-- TODO -->

        </div>
      </div>
    </div>

  </div>
</app-authorised-layout>
