<app-authorised-layout>
  <div *ngIf="form" class="af-layout--authorised">

    <div class="af-form-wrapper">

      <div class="af-form-row">
        <div class="af-form-block--c12 d-flex justify-content-between">
          <div class="title-page content-element--title">{{ title }}<span></span></div>
        </div>
      </div>

      <!-- row 1 -->
      <div class="af-form-row">

        <!-- row 1, col 1 -->
        <div class="af-form-block--c6">
          <h2 i18n="@@productLabelStockProcessingOrderDetail.section.processing">Choose activity that you want to record</h2>
          <div class="af-form-element">
            <div class="af-row">
              <div class="af-c12">

                <single-choice
                        label="Processing"
                        i18n-label="@@productLabelStockProcessingOrderDetail.processingActionForm.label"
                        [formControlInput]="processingActionForm"
                        [codebookService]="activeProcessingCodebook"
                        style="min-width: 150px;"
                        (onChange)="setProcessingAction($event)"
                        [isInvalidChoice]="submitted && processingActionForm.invalid">
                  <ng-container *ngIf="submitted">
                    <div *ngIf="processingActionForm.errors as errors" class="sc-invalid-feedback"
                         i18n="@@productLabelStockProcessingOrderDetail.processingActionForm.error">
                      Action is required
                    </div>
                  </ng-container>
                </single-choice>

              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- row 2 -->
      <div class="af-form-row">

        <!-- row 2, col 1 -->
        <div class="af-form-block--c6">
          <h2 i18n="@@productLabelStockProcessingOrderDetail.section.input">Material to be recorded</h2>

          <div class="af-form-element" style="position: relative;">
            <ng-container *ngIf="this.prAction">

              <div class="af-row mb-3" *ngIf="actionType === 'SHIPMENT'">
                <div class="af-c12">
                  {{ inputFacilityForm?.value?.company?.name }}
                </div>
              </div>

              <div class="af-row">
                <div class="af-c12">

                  <single-choice
                          *ngIf="inputFacilitiesCodebook"
                          label="Facility"
                          i18n-label="@@productLabelStockProcessingOrderDetail.inputFacilityForm.label"
                          [formControlInput]="inputFacilityForm"
                          [codebookService]="inputFacilitiesCodebook"
                          style="min-width: 150px;"
                          (onChange)="setInputFacility($event)"
                          [isInvalidChoice]="submitted && inputFacilityForm.invalid">
                    <ng-container *ngIf="submitted">
                      <div *ngIf="inputFacilityForm.errors as errors" class="sc-invalid-feedback" i18n="@@productLabelStockProcessingOrderDetail.inputFacilityForm.error">
                        Input facility is required
                      </div>
                    </ng-container>
                  </single-choice>

                </div>
              </div>

              <div class="af-row" *ngIf="showFilterSemiProduct">
                <div class="af-c12">
                  <single-choice
                          label="Select semi-product"
                          i18n-label="@@productLabelStockProcessingOrderDetail.filterSemiProduct.label"
                          [formControlInput]="filterSemiProduct"
                          [codebookService]="semiProductsInFacility"
                          (onChange)="selectedSemiProductChange($event)">
                  </single-choice>
                </div>
              </div>

              <!-- TODO -->

            </ng-container>
          </div>

        </div>

        <!-- row 2, col 2 -->
        <div class="af-form-block--c6">
          <h2 i18n="@@productLabelStockProcessingOrderDetail.section.output">Results of recording</h2>

          <div class="af-form-element" style="position: relative;">
            <ng-container *ngIf="this.prAction">

              <!-- TODO -->

            </ng-container>
          </div>

        </div>

      </div>

    </div>
  </div>
</app-authorised-layout>
