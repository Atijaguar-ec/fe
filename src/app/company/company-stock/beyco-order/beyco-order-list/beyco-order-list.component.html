<!-- TODO: add i18n translations -->
<app-authorised-layout>

    <div class="af-layout--authorised">

        <div class="af-form-wrapper">

<!--            Page title -->
            <div class="af-form-row">
                <div class="af-form-block--c12 d-flex justify-content-between">
                    <div class="title-page content-element--title">Make Beyco order</div>
                </div>
            </div>

<!--            Shared fields between coffe lots -->
            <div class="af-form-row" *ngIf="generalForm">
                <div class="af-form-block--c12">
                    <h2>General values</h2>
                    <div class="af-form-element">

                        <div class="af-row">
                            <div class="af-c6">
                                <textinput
                                        label="Title of order"
                                        [form]="fc(generalForm, 'title')"
                                >
                                    <ng-container *ngIf="fc(generalForm, 'title').touched">
                                        <div *ngIf="fc(generalForm, 'title').errors as errors" class="sc-invalid-feedback">
                                            Title is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                            <div class="af-c6">
                                <app-datepicker
                                        label="Available at"
                                        [form]="fc(generalForm, 'availableAt')"
                                        [touchOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(generalForm, 'availableAt').touched">
                                        <div *ngIf="fc(generalForm, 'availableAt').errors as errors" class="sc-invalid-feedback">
                                            Available date is required
                                        </div>
                                    </ng-container>
                                </app-datepicker>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c6">
                                <textinput
                                        label="Address of port of export"
                                        [form]="fc(generalForm, 'address')"
                                >
                                    <ng-container *ngIf="fc(generalForm, 'address').touched">
                                        <div *ngIf="fc(generalForm, 'address').errors as errors" class="sc-invalid-feedback">
                                            Address is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                            <div class="af-c6">
                                <textinput
                                        label="Country of port of export"
                                        [form]="fc(generalForm, 'country')"
                                >
                                    <ng-container *ngIf="fc(generalForm, 'country').touched">
                                        <div *ngIf="fc(generalForm, 'country').errors as errors" class="sc-invalid-feedback">
                                            Country is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c6">
                                <textinput
                                        label="Latitude of port of export"
                                        [form]="fc(generalForm, 'latitude')"
                                        type="number"
                                >
                                    <ng-container *ngIf="fc(generalForm, 'latitude').touched">
                                        <div *ngIf="fc(generalForm, 'latitude').errors as errors" class="sc-invalid-feedback">
                                            Latitude component is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                            <div class="af-c6">
                                <textinput
                                        label="Longitude of port of export"
                                        [form]="fc(generalForm, 'longitude')"
                                        type="number"
                                >
                                    <ng-container *ngIf="fc(generalForm, 'longitude').touched">
                                        <div *ngIf="fc(generalForm, 'longitude').errors as errors" class="sc-invalid-feedback">
                                            Longitude component is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

<!--            Coffee detail fields for each lot selected for Beyco order -->
            <div class="af-form-row" *ngFor="let form of coffeeInfoForms">
                <div class="af-form-block--c12">
                    <h2>{{ fc(form, 'title').value }}</h2>

                    <div class="af-form-element">
                        <div class="af-row">
                            <div class="af-c8">
                                <textinput
                                        label="Name"
                                        [form]="fc(form, 'name')"
                                >
                                    <ng-container *ngIf="fc(form, 'name').touched">
                                        <div *ngIf="fc(form, 'name').errors as errors" class="sc-invalid-feedback">
                                            Name is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                            <div class="af-c4">
                                <textinput
                                        label="Quantity"
                                        [form]="fc(form, 'quantity')"
                                        type="number"
                                >
                                    <ng-container *ngIf="fc(form, 'quantity').touched">
                                        <div *ngIf="fc(form, 'quantity').errors as errors" class="sc-invalid-feedback">
                                            Quantity is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c5">
                                <textinput
                                        label="Price"
                                        [form]="fc(form, 'price')"
                                        type="number"
                                >
                                    <ng-container *ngIf="fc(form, 'price').touched">
                                        <div *ngIf="fc(form, 'price').errors as errors" class="sc-invalid-feedback">
                                            Price is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                            <div class="af-c4">
                                <single-choice
                                        label="Price unit"
                                        [formControlInput]="fc(form, 'priceUnit')"
                                        [enumChoices]="PriceUnit"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'priceUnit').touched">
                                        <div *ngIf="fc(form, 'priceUnit').errors as errors" class="sc-invalid-feedback">
                                            Price unit is required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                            <div class="af-c3">
                                <single-choice
                                        label="Currency"
                                        [formControlInput]="fc(form, 'currency')"
                                        [enumChoices]="Currency"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'currency').touched">
                                        <div *ngIf="fc(form, 'currency').errors as errors" class="sc-invalid-feedback">
                                            Currency is required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c3">
                                <app-datepicker
                                        label="Harvest date"
                                        [form]="fc(form, 'harvestAt')"
                                        [touchOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'harvestAt').touched">
                                        <div *ngIf="fc(form, 'harvestAt').errors as errors" class="sc-invalid-feedback">
                                            Harvest date is required
                                        </div>
                                    </ng-container>
                                </app-datepicker>
                            </div>
                            <div class="af-c5">
                                <textinput
                                        label="Region"
                                        [form]="fc(form, 'region')"
                                ></textinput>
                            </div>
                            <div class="af-c4">
                                <textinput
                                        label="Country"
                                        [form]="fc(form, 'country')"
                                >
                                    <ng-container *ngIf="fc(form, 'country').touched">
                                        <div *ngIf="fc(form, 'country').errors as errors" class="sc-invalid-feedback">
                                            Country is required
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c2">
                                <single-choice
                                        label="Incoterms"
                                        [formControlInput]="fc(form, 'incoterms')"
                                        [enumChoices]="Incoterms"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'incoterms').touched">
                                        <div *ngIf="fc(form, 'incoterms').errors as errors" class="sc-invalid-feedback">
                                            Incoterm is required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                            <div class="af-c5">
                                <single-choice
                                        label="Species"
                                        [formControlInput]="fc(form, 'species')"
                                        [enumChoices]="Species"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'species').touched">
                                        <div *ngIf="fc(form, 'species').errors as errors" class="sc-invalid-feedback">
                                            Species is required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                            <div class="af-c5">
                                <single-choice
                                        label="Process"
                                        [formControlInput]="fc(form, 'process')"
                                        [enumChoices]="Process"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'process').touched">
                                        <div *ngIf="fc(form, 'process').errors as errors" class="sc-invalid-feedback">
                                            Process is required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c4">
                                <textinput
                                        label="Min screen size"
                                        [form]="fc(form, 'minScreenSize')"
                                        type="number"
                                        appWholeNumber
                                >
                                    <ng-container *ngIf="fc(form, 'minScreenSize').touched">
                                        <div *ngIf="fc(form, 'minScreenSize').errors as errors" class="sc-invalid-feedback">
                                            <span *ngIf="errors.min">Min screen size should be 8 or more</span>
                                            <span *ngIf="errors.max">Min screen size should be 20 or less</span>
                                            <span *ngIf="errors.required">Min screen size is required</span>
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                            <div class="af-c4">
                                <textinput
                                        label="Max screen size"
                                        [form]="fc(form, 'maxScreenSize')"
                                        type="number"
                                        appWholeNumber
                                >
                                    <ng-container *ngIf="fc(form, 'maxScreenSize').touched">
                                        <div *ngIf="fc(form, 'maxScreenSize').errors as errors" class="sc-invalid-feedback">
                                            <span *ngIf="errors.min">Max screen size should be 8 or more</span>
                                            <span *ngIf="errors.max">Max screen size should be 20 or less</span>
                                            <span *ngIf="errors.required">Max screen size is required</span>
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                            <div class="af-c4">
                                <textinput
                                        label="Cupping score"
                                        [form]="fc(form, 'cuppingScore')"
                                        type="number"
                                        appWholeNumber
                                >
                                    <ng-container *ngIf="fc(form, 'cuppingScore').touched">
                                        <div *ngIf="fc(form, 'cuppingScore').errors as errors" class="sc-invalid-feedback">
                                            <span *ngIf="errors.min">Cupping score should be 60 or more</span>
                                            <span *ngIf="errors.max">Cupping score should be 100 or less</span>
                                            <span *ngIf="errors.required">Cupping score is required</span>
                                        </div>
                                    </ng-container>
                                </textinput>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c6">
                                <single-choice
                                        label="Varieties"
                                        [formControlInput]="fc(form, 'varieties')"
                                        [enumChoices]="Variety"
                                        [allowMultiple]="true"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'varieties').touched">
                                        <div *ngIf="fc(form, 'varieties').errors as errors" class="sc-invalid-feedback">
                                            Varieties are required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                            <div class="af-c6">
                                <single-choice
                                        label="Quality segments"
                                        [formControlInput]="fc(form, 'qualitySegments')"
                                        [enumChoices]="QualitySegment"
                                        [allowMultiple]="true"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'qualitySegments').touched">
                                        <div *ngIf="fc(form, 'qualitySegments').errors as errors" class="sc-invalid-feedback">
                                            Quality segments are required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                        </div>

                        <div class="af-row">
                            <div class="af-c6">
                                <single-choice
                                        label="Grades"
                                        [formControlInput]="fc(form, 'grades')"
                                        [enumChoices]="Grade"
                                        [allowMultiple]="true"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'grades').touched">
                                        <div *ngIf="fc(form, 'grades').errors as errors" class="sc-invalid-feedback">
                                            Grades are required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                            <div class="af-c6">
                                <single-choice
                                        label="Certificates"
                                        [formControlInput]="fc(form, 'certificates')"
                                        [enumChoices]="Certificate"
                                        [allowMultiple]="true"
                                        [touchedOnBlur]="true"
                                >
                                    <ng-container *ngIf="fc(form, 'certificates').touched">
                                        <div *ngIf="fc(form, 'certificates').errors as errors" class="sc-invalid-feedback">
                                            Certificates are required
                                        </div>
                                    </ng-container>
                                </single-choice>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

<!--            Buttons -->
            <div class="af-form-row">
                <div class="af-form-block--c12">
                    <div class="af-bottom-buttons">
                        <button class="btn" type="button" (click)="submit()"><span>Submit</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</app-authorised-layout>
