<app-authorised-layout>
  <div *ngIf="(mode === 'PURCHASE' && paymentForm && searchFarmers.value || mode === 'CUSTOMER' && paymentForm)" class="af-layout--authorised">

    <div class="af-form-wrapper">

      <div class="af-form-row">
        <div class="af-form-block--c12 d-flex justify-content-between">
          <!-- <h4 class="modal-title" i18n="@@productLabelStockPayments.title">{{title}}</h4> -->
          <div class="title-page content-element--title">{{title}} <span>{{paymentForm.get('receiptNumber').value}}</span></div>
          <app-last-seen-tag *ngIf="this.update"
            [dateFormat]="paymentForm.get('lastChange').value"
            [identifier]="userLastChanged">
          </app-last-seen-tag>
        </div>
      </div>

      <div class="af-form-row">

        <div class="af-form-block--c6">

          <h2 i18n="@@productLabelStockPayments.section.basicInfo">Basic information</h2>
          <div class="af-form-element">
            <app-payment-form
              [form]="paymentForm"
              [payableFromForm]="payableFromForm"
              [submitted]="submitted"
              [searchCompanies]="searchCompanies"
              [searchFarmers]="searchFarmers"
              [searchCollectors]="searchCollectors"
              [farmersCodebook]="farmersCodebook"
              [collectorsCodebook]="collectorsCodebook"
              [orderReferenceForm]="orderReferenceForm"
              [openBalance]="openBalanceToBeSet"
              [purchased]="purchasedToBeSet"
              [viewOnly]="this.update"
              [mode]="this.mode">
            </app-payment-form>
          </div>

        </div>
      </div>
      <div class="af-form-row">
        <div class="af-form-block--c12">

          <div class="af-bottom-buttons" i18n="@@productLabelStockPayments.modal.footer.buttons">
            <button class="btn btn-outlined mr-2" data-dismiss="modal" type="button" (click)="dismiss()"><span>Cancel</span></button>
            <button class="btn" type="button" [disabled]="hideSavedButton()" (click)="!this.updatePaymentInProgress && updatePayment()"><span>Save</span></button>
          </div>

        </div>
      </div>


    </div>

  </div>
</app-authorised-layout>
