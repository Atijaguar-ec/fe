

<div class="modal-container" style="max-width: 500px;">
  <div class="modal-header">
    <h4 class="modal-title">{{modalTitle}}</h4>
    <button type="button" class="close" aria-label="Close"
      (click)="activeModal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div>
    <div class="modal-body">
      <form>
        <div class="d-flex">
          <div class="form-group" style="flex: 3 100%">
            <label for="number" i18n="@@checkBatchNumber.modal.label.batchNumber">Batch number</label>
            <input type="text" name="number" id="number" class="form-control" [formControl]="checkBatchForm.get('batchNumber')" [ngClass]="{ 'is-invalid': (nextPressed || submitted) && checkBatchForm.get('batchNumber').invalid }">
          </div>
          <div class="d-flex align-items-end">
            <button class="btn btn-solid round" style="height: 40px; flex: 1; margin-left: 8px; margin-bottom: 14px" type="button" (click)="next()" i18n="@@checkBatchNumber.modal.button.next"><span>Next</span></button>
          </div>
        </div>
        <ng-container *ngIf="nextPressed || submitted">
          <div *ngIf="checkBatchForm.get('batchNumber').errors as errors" class="sc-invalid-feedback" style="margin-top: -12px;">
            <div *ngIf="errors.required" i18n="@@checkBatchNumber.modal.error.batchNumber">
              Batch number is required
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="showCheckAuthenticity != null && !showCheckAuthenticity && nextPressed && !originTrace" i18n="@@checkBatchNumber.modal.notProvided.authenticity">
          Authenticity check is not provided
        </ng-container>
        <ng-container *ngIf="showCheckOriginTrace != null && !showCheckOriginTrace && nextPressed && originTrace" i18n="@@checkBatchNumber.modal.notProvided.origin">
          Trace origin is not provided
        </ng-container>
        <ng-container *ngIf="showCheckAuthenticity">
          <ng-container *ngIf="showPhoto">
            <img *ngIf="photo.storageKey"
              src="/api/public/image/{{photo.storageKey}}/SMALL"
              default="/api/public/image/{{photo.storageKey}}"
              style="width: 100%; max-height: 250px; margin-bottom: 24px;">
          </ng-container>
          <ng-container *ngIf="showExpiryDate">
            <div class="form-group">
              <label for="expiry_date" i18n="@@checkBatchNumber.modal.label.expiryDate">Expiry date</label>
              <div class="row">
                <div class="col">
                  <select id="expiry_date__2i" name="expiry_date[(2i)]" class="form-control" [formControl]="checkBatchForm.get('expDateMonth')" (change)="notAllFieldsAreField()">
                    <option value="" i18n="@@checkBatchNumber.modal.select.expiryDate.month">Month</option>
                    <option value="1" i18n="@@checkBatchNumber.modal.select.expiryDate.january">January</option>
                    <option value="2" i18n="@@checkBatchNumber.modal.select.expiryDate.february">February</option>
                    <option value="3" i18n="@@checkBatchNumber.modal.select.expiryDate.march">March</option>
                    <option value="4" i18n="@@checkBatchNumber.modal.select.expiryDate.april">April</option>
                    <option value="5" i18n="@@checkBatchNumber.modal.select.expiryDate.may">May</option>
                    <option value="6" i18n="@@checkBatchNumber.modal.select.expiryDate.june">June</option>
                    <option value="7" i18n="@@checkBatchNumber.modal.select.expiryDate.july">July</option>
                    <option value="8" i18n="@@checkBatchNumber.modal.select.expiryDate.august">August</option>
                    <option value="9" i18n="@@checkBatchNumber.modal.select.expiryDate.september">September</option>
                    <option value="10" i18n="@@checkBatchNumber.modal.select.expiryDate.october">October</option>
                    <option value="11" i18n="@@checkBatchNumber.modal.select.expiryDate.november">November</option>
                    <option value="12" i18n="@@checkBatchNumber.modal.select.expiryDate.december">December</option>
                  </select>
                </div>
                <div class="col">
                  <select id="expiry_date__3i" name="expiry_date[(3i)]" class="form-control" [formControl]="checkBatchForm.get('expDateDay')" (change)="notAllFieldsAreField()">
                    <option value="" i18n="@@checkBatchNumber.modal.select.expiryDate.day">Day</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                  </select>
                </div>
                <div class="col">
                  <select id="expiry_date__1i" name="expiry_date[(1i)]" class="form-control" [formControl]="checkBatchForm.get('expDateYear')" (change)="notAllFieldsAreField()">
                    <option value="" i18n="@@checkBatchNumber.modal.select.expiryDate.year">Year</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                    <option value="2029">2029</option>
                    <option value="2030">2030</option>
                    <option value="2031">2031</option>
                    <option value="2032">2032</option>
                    <option value="2033">2033</option>
                    <option value="2034">2034</option>
                    <option value="2035">2035</option>
                    <option value="2036">2036</option>
                    <option value="2037">2037</option>
                    <option value="2038">2038</option>
                    <option value="2039">2039</option>
                    <option value="2040">2040</option>
                    <option value="2041">2041</option>
                    <option value="2042">2042</option>
                    <option value="2043">2043</option>
                    <option value="2044">2044</option>
                    <option value="2045">2045</option>
                    <option value="2046">2046</option>
                    <option value="2047">2047</option>
                    <option value="2048">2048</option>
                    <option value="2049">2049</option>
                    <option value="2050">2050</option>
                  </select>
                </div>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="showProductionDate">
            <div class="form-group">
              <label for="production_date" i18n="@@checkBatchNumber.modal.label.productionDate">Production date</label>
              <div class="row">
                <div class="col">
                  <select id="production_date__2i" name="production_date[(2i)]" class="form-control" [formControl]="checkBatchForm.get('prodDateMonth')" (change)="notAllFieldsAreField()">
                    <option value="" i18n="@@checkBatchNumber.modal.select.productionDate.month">Month</option>
                    <option value="1" i18n="@@checkBatchNumber.modal.select.productionDate.january">January</option>
                    <option value="2" i18n="@@checkBatchNumber.modal.select.productionDate.february">February</option>
                    <option value="3" i18n="@@checkBatchNumber.modal.select.productionDate.march">March</option>
                    <option value="4" i18n="@@checkBatchNumber.modal.select.productionDate.april">April</option>
                    <option value="5" i18n="@@checkBatchNumber.modal.select.productionDate.may">May</option>
                    <option value="6" i18n="@@checkBatchNumber.modal.select.productionDate.june">June</option>
                    <option value="7" i18n="@@checkBatchNumber.modal.select.productionDate.july">July</option>
                    <option value="8" i18n="@@checkBatchNumber.modal.select.productionDate.august">August</option>
                    <option value="9" i18n="@@checkBatchNumber.modal.select.productionDate.september">September</option>
                    <option value="10" i18n="@@checkBatchNumber.modal.select.productionDate.october">October</option>
                    <option value="11" i18n="@@checkBatchNumber.modal.select.productionDate.november">November</option>
                    <option value="12" i18n="@@checkBatchNumber.modal.select.productionDate.december">December</option>
                  </select>
                </div>
                <div class="col">
                  <select id="production_date__3i" name="production_date[(3i)]" class="form-control" [formControl]="checkBatchForm.get('prodDateDay')" (change)="notAllFieldsAreField()">
                    <option value="" i18n="@@checkBatchNumber.modal.select.productionDate.day">Day</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                  </select>
                </div>
                <div class="col">
                  <select id="production_date__1i" name="production_date[(1i)]" class="form-control" [formControl]="checkBatchForm.get('prodDateYear')" (change)="notAllFieldsAreField()">
                    <option value="" i18n="@@checkBatchNumber.modal.select.productionDate.year">Year</option>
                    <option value="1990">1990</option>
                    <option value="1991">1991</option>
                    <option value="1992">1992</option>
                    <option value="1993">1993</option>
                    <option value="1994">1994</option>
                    <option value="1995">1995</option>
                    <option value="1996">1996</option>
                    <option value="1997">1997</option>
                    <option value="1998">1998</option>
                    <option value="1999">1999</option>
                    <option value="2000">2000</option>
                    <option value="2001">2001</option>
                    <option value="2002">2002</option>
                    <option value="2003">2003</option>
                    <option value="2004">2004</option>
                    <option value="2005">2005</option>
                    <option value="2006">2006</option>
                    <option value="2007">2007</option>
                    <option value="2008">2008</option>
                    <option value="2009">2009</option>
                    <option value="2010">2010</option>
                    <option value="2011">2011</option>
                    <option value="2012">2012</option>
                    <option value="2013">2013</option>
                    <option value="2014">2014</option>
                    <option value="2015">2015</option>
                    <option value="2016">2016</option>
                    <option value="2017">2017</option>
                    <option value="2018">2018</option>
                    <option value="2019">2019</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                  </select>
                </div>
              </div>
            </div>
          </ng-container>
          <div *ngIf="notAll" class="sc-invalid-feedback" i18n="@@checkBatchNumber.modal.required">
            All fields are required
          </div>
        </ng-container>
        <ng-container *ngIf="showCheckOriginTrace">
          <google-map
            *ngIf="isGoogleMapsLoaded"
            height="380px"
            width="100%">
            <map-marker
              #gMarker="mapMarker"
              *ngFor="let marker of markers; index as i"
              [position]="marker.position"
              [label]="marker.label"
              (mapClick)="openInfoWindow(gMarker, marker)">
            </map-marker>
            <map-info-window>{{gInfoWindowText}}</map-info-window>
          </google-map>
        </ng-container>
      </form>
    </div>
  </div>
  <div class="modal-footer" i18n="@@checkBatchNumber.modal.footer.buttons">
    <button class="btn btn-outlined" data-dismiss="modal" type="button" (click)="dismiss()"><span>Cancel</span></button>
    <ng-container *ngIf="!originTrace">
      <button class="btn" type="button" (click)="verifyAuthenticity()"><span>Check</span></button>
    </ng-container>
  </div>
